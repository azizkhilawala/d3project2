<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Project 2</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <style>
        .counties
        {
            fill: gray;
            stroke: black;
            stroke-width: .1px;
        }

        path
        {
            fill: white;
            stroke: black;
            stroke-width: .1px;
        }

        .states
        {
            fill: none;
            stroke: #black;
            stroke-linejoin: round;
            stroke-width: .1px;
        }
        .sidemenuitem{
            width:100%;
            padding: 20px;
            font-size: 1.6em;
            white-space: normal;
            text-align: left;
        }
        .firstlevel{
            text-align: left;
            font-size: 1.6em;
        }
        .secondlevel{
            text-align: center;
            font-size: 1.4em;
        }
        .thirdlevel{
            text-align: right;
            font-size: 1.2em;
        }
        .fourthlevel{
            font-size: 1.2em;
            text-align: right;
            font-style: italic;
        }
        .d3-tip
        {
            font-weight: bold;
            line-height: 1;

            padding: 12px;

            color: #fff;
            border-radius: 2px;
            background: rgba(0, 0, 0, .8);
        }

        .d3-tip:after
        {
            font-size: 10px;
            line-height: 1;

            position: absolute;

            display: inline;

            box-sizing: border-box;
            width: 100%;

            content: '\25BC';
            text-align: center;

            color: rgba(0, 0, 0, .8);
        }

        .d3-tip.n:after
        {
            top: 100%;
            left: 0;

            margin: -1px 0 0 0;
        }
        #menudiv{
            height: 100vh;
        }
        .sidemenucontainer{
            height:90%;
            overflow-y: scroll;
        }
    </style>
</head>
<body>
<div class="container" style="border: solid;border-color: black;border-width: 1px;width: 100vw;">
    <div class="row" style="border: solid;border-color: black;border-width: 1px;">
        <div id="menudiv" class="col-md-2" style="border: solid;border-color: black;border-width: 1px;">
            <div>
                <p style="height: 5vh;line-height: 5vh;text-align: left;">
                    Menu
                </p>
                <span><button id="menuback" class="btn btn-default hidden">back</button></span>
            </div>
            <div class="btn-group sidemenucontainer" id="level1dataset" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default active sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" checked value="dataset1">Total population within the locality
                </label>
                <!--<button class="btn sidemenuitem">Total population within the locality</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset2">Age distribution broken down by sex
                </label>
                <!--<button class="btn sidemenuitem">Age distribution broken down by sex</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset3">Median age by sex
                </label>
                <!--<button class="btn sidemenuitem">Median age by sex</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset4">Race
                </label>
                <!--<button class="btn sidemenuitem">Race</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset5">Living arrangement for adults (18 years and over)
                </label>
                <!--    <button class="btn sidemenuitem">Living arrangement for adults (18 years and over)</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset6">Place of birth by nativity
                </label>
                <!--<button class="btn sidemenuitem">Place of birth by nativity</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset7">Median household income
                </label>
                <!--<button class="btn sidemenuitem">Median household income</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset8">Per capita income
                </label>
                <!--<button class="btn sidemenuitem">Per capita income</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset9">Income to poverty-level ratio
                </label>
                <!--<button class="btn sidemenuitem">Income to poverty-level ratio</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset10">Poverty level by place of birth
                </label>
                <!--<button class="btn sidemenuitem">Poverty level by place of birth</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset11">Educational attainment by place of birth
                </label>
                <!--<button class="btn sidemenuitem">Educational attainment by place of birth</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset12">Travel time to work
                </label>
                <!--<button class="btn sidemenuitem">Travel time to work</button>-->
                <label class="btn btn-default sidemenuitem">
                    <input type="radio" class="toggle" name="datasettype" value="dataset13">Means of transportation to work
                </label>
                <!--<button class="btn sidemenuitem">Means of transportation to work</button>-->
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset1" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default active sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset" checked value="B01003_001E">Total
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset2" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_001E">Total
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_002E">Male
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_003E">Under 5 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_004E">5 to 9 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_005E">10 to 14 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_006E">15 to 17 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_007E">18 and 19 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_008E">20 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_009E">21 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_010E">22 to 24 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_011E">25 to 29 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_012E">30 to 34 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_013E">35 to 39 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_014E">40 to 44 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_015E">45 to 49 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_016E">50 to 54 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_017E">55 to 59 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_018E">60 and 61 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_019E">62 to 64 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_020E">65 and 66 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_021E">67 to 69 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_022E">70 to 74 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_023E">75 to 79 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_024E">80 to 84 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_025E">85 Years and over
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_026E">Female
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_027E">Under 5 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_028E">5 to 9 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_029E">10 to 14 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_030E">15 to 17 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_031E">18 and 19 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_032E">20 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_033E">21 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_034E">22 to 24 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_035E">25 to 29 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_036E">30 to 34 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_037E">35 to 39 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_038E">40 to 44 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_039E">45 to 49 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_040E">50 to 54 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_041E">55 to 59 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_042E">60 and 61 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_043E">62 to 64 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_044E">65 and 66 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_045E">67 to 69 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_046E">70 to 74 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_047E">75 to 79 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_048E">80 to 84 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_049E">85 Years and over
                </label>

            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset3" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01002_001E">Median Age: Total
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01002_002E">Median Age: Male
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01002_003E">Median Age: Female
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset4" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_001E">Total
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_002E">White Alone
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_003E">Black or African American Alone
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_004E">American Indian and Alaska Native Alone
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_005E">Asian Alone
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_006E">Native Hawaiian and Other Pacific Islander Alone
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_007E">Some Other Race Alone
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_008E">Two or More Races
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_009E">Two Races Including Some Other Race
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_010E">Two Races Excluding Some Other Race, and Three or More Races
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset5" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B09021_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_002E">Lives Alone
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_003E">Householder Living With Spouse or Spouse of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_004E">Householder Living With Unmarried Partner or Unmarried Partner of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_005E">Child of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_006E">Other Relatives
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_007E">Other Nonrelatives
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_008E">18 to 34 Years
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_009E">Lives Alone
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_010E">Householder Living With Spouse or Spouse of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_011E">Householder Living With Unmarried Partner or Unmarried Partner of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_012E">Child of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_013E">Other Relatives
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_014E">Other Nonrelatives
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_015E">35 to 64 Years
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_016E">Lives Alone
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_017E">Householder Living With Spouse or Spouse of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_018E">Householder Living With Unmarried Partner or Unmarried Partner of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_019E">Child of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_020E">Other Relatives
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_021E">Other Nonrelatives
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_022E">65 Years and over
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_023E">Lives Alone
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_024E">Householder Living With Spouse or Spouse of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_025E">Householder Living With Unmarried Partner or Unmarried Partner of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_026E">Child of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_027E">Other Relatives
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B09021_028E">Other Nonrelatives
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset6" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="C05002_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_002E">Native
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_003E">Born in State of Residence
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_004E">Born in Other State in the United States
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_005E">Born Outside the United States
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_006E">Puerto Rico
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_007E">U.s. Island Areas or Born Abroad of American Parent(S)
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_008E">Foreign Born
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset7" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B19013_001E">Total
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset8" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B19301_001E">Total
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset9" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B17002_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_002E">Under .50
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_003E">.50 to .74
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_004E">.75 to .99
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_005E">1.00 to 1.24
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_006E">1.25 to 1.49
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_007E">1.50 to 1.74
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_008E">1.75 to 1.84
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_009E">1.85 to 1.99
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_010E">2.00 to 2.99
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_011E">3.00 to 3.99
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_012E">4.00 to 4.99
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_013E">5.00 and over
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset10" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B06012_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_002E">Below 100 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_003E">100 to 149 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_004E">At or Above 150 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_005E">Born in State of Residence
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_006E">Below 100 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_007E">100 to 149 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_008E">At or Above 150 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_009E">Born in Other State in the United States
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_010E">Below 100 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_011E">100 to 149 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_012E">At or Above 150 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_013E">Native; Born Outside the United States
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_014E">Below 100 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_015E">100 to 149 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_016E">At or Above 150 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_017E">Foreign Born
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_018E">Below 100 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_019E">100 to 149 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06012_020E">At or Above 150 Percent of the Poverty Level
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset11" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B06009_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_002E">Less than High School Graduate
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_003E">High School Graduate (Includes Equivalency)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_004E">Some College or Associate's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_005E">Bachelor's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_006E">Graduate or Professional Degree
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_007E">Born in State of Residence
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_008E">Less than High School Graduate
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_009E">High School Graduate (Includes Equivalency)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_010E">Some College or Associate's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_011E">Bachelor's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_012E">Graduate or Professional Degree
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_013E">Born in Other State in the United States
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_014E">Less than High School Graduate
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_015E">High School Graduate (Includes Equivalency)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_016E">Some College or Associate's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_017E">Bachelor's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_018E">Graduate or Professional Degree
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_019E">Native; Born Outside the United States
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_020E">Less than High School Graduate
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_021E">High School Graduate (Includes Equivalency)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_022E">Some College or Associate's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_023E">Bachelor's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_024E">Graduate or Professional Degree
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_025E">Foreign Born
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_026E">Less than High School Graduate
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_027E">High School Graduate (Includes Equivalency)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_028E">Some College or Associate's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_029E">Bachelor's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_030E">Graduate or Professional Degree
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset12" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_002E">Less than 5 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_003E">5 to 9 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_004E">10 to 14 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_005E">15 to 19 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_006E">20 to 24 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_007E">25 to 29 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_008E">30 to 34 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_009E">35 to 39 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_010E">40 to 44 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_011E">45 to 59 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_012E">60 to 89 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_013E">90 or More Minutes
                </label>

            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset13" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08301_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_002E">Car, Truck, or Van
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_003E">Drove Alone
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_004E">Carpooled
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_005E">In 2-Person Carpool
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_006E">In 3-Person Carpool
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_007E">In 4-Person Carpool
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_008E">In 5- or 6-Person Carpool
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_009E">In 7-or-More-Person Carpool
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_010E">Public Transportation (Excluding Taxicab)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_011E">Bus or Trolley Bus
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_012E">Streetcar or Trolley Car (Carro Publico in Puerto Rico)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_013E">Subway or Elevated
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_014E">Railroad
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_015E">Ferryboat
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_016E">Taxicab
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_017E">Motorcycle
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_018E">Bicycle
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_019E">Walked
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_020E">Other Means
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_021E">Worked at Home
                </label>

            </div>
        </div>
        <div class="col-md-10" style="border: solid;border-color: black;border-width: 1px;">
            <div class="row">
                <div class="col-md-12">
                    <h1>Title</h1>
                </div>
            </div>
            <div class="row" style="border: solid;border-color: black;border-width: 1px;">
                <div class="col-md-10" style="border: solid;border-color: black;border-width: 1px;height: 60vh">
                    <svg id="choropeth" width="1200" height="640">
                        <text x="10px" y="10px">Map</text>
                    </svg>
                </div>
                <div class="col-md-2">
                    <div><button class="btn btn-default">help</button></div>
                    <div><button class="btn btn-default">documentation</button></div>
                    <div><button class="btn btn-default">compare checkbox</button></div>
                    <button id="gotoscatter" class="btn btn-default">scatterplot</button>
                    <div style="height: 40vh;">sep</div>
                    <div class="btn-group" id="disptype" data-toggle="buttons" style="width: 100%;margin-top: 10px;">
                        <label class="btn btn-default blue active" style="width: 25%;margin-left: 30px;border-radius: 2px;">
                            <input type="radio" class="toggle" checked name="disp" value="state"> States
                        </label>
                        <label class="btn btn-default blue" style="width: 25%;margin-left: 25%;border-radius: 2px;">
                            <input type="radio" class="toggle" name="disp" value="county"> Counties
                        </label>
                    </div>
                </div>
            </div>
            <div class="row" style="border: solid;border-color: black;border-width: 1px;height: 30vh">
                <div class="col-md-3">
                    <svg id="pie1" width="350" height="350">
                        <text x="10px" y="10px">pie1</text>
                    </svg>
                </div>
                <div class="col-md-3">
                    <svg id="pie2" width="350" height="350">
                        <text x="10px" y="10px">pie2</text>
                    </svg>
                </div>
                <!--<div class="col-md-3">
                    <svg id="pie3" width="350" height="350">
                        <text x="10px" y="10px">pie3</text>
                    </svg>
                </div>-->
                <div class="col-md-6">
                    <svg id="barchart1" width="700" height="350">
                        <text x="10px" y="10px">Barchart</text>
                    </svg>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="js/d3.v3.min.js"></script>
<script src="//d3js.org/topojson.v1.min.js"></script>
<script src="http://d3js.org/queue.v1.min.js"></script>
<script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
<script src="js/legend.js" charset="utf-8"></script>
<script src="js/jquery-3.1.0.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script>
    var scselection = "state";
    var stateNameObj = [];
    var countyNameObj = [];
    var us, one;
    var scselection; //state or count selection
    var dataselection; //dataset selection
    var svg = d3.select("#choropeth"),
            width = +svg.attr("width"),
            height = +svg.attr("height");
    $(document).ready(function() {
        //console.log(window.innerWidth,window.innerHeight);
        scselection = $('#disptype input:radio:checked').val() ;
        queue()
                .defer(d3.json, "js/us.json")
                .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B01003_001E&for=state:*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                .await(ready);
    });
    function ready(error, us1, data1) {
        us = us1;
        one = data1;
        drawMap(null, one);
    }
    $("input[name=datasettype]").change(function(){
        var t = $('#level1dataset input:radio:checked').val();
        $("#"+t).removeClass("hidden");
        $("#"+t).addClass("activemenu");
        $('#level1dataset').addClass("hidden")
        $('#menuback').removeClass('hidden');

        //$( "#"+t +" label:first-child").addClass('checked', true);
        //$( "#"+t +" input:first-child").attr('checked', true);
        $( "#"+t +" label:first-child").click();
    });
    $("#menuback").click(function(){
        $(".activemenu").addClass("hidden");
        $('#level1dataset').removeClass("hidden");
        $(".activemenu").removeClass("activemenu");
        $('#menuback').addClass('hidden');
    });
    $("input[name=dataset]").change(function(){
        var str = this.value;
        dataselection = str;//.slice(0, 6) + "_" + str.slice(6 , 9)+"E";
        scselection = $('#disptype input:radio:checked').val() ;
        queue()
                .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME," + dataselection + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                .await(drawMap);
    });
    $("input[name=disp]").change(function() {
        dataselection = $('#'+ $('#level1dataset input:radio:checked').val()+' input:radio:checked').val();
        scselection = $('#disptype input:radio:checked').val();
        queue()
                .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME," + dataselection + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                .await(drawMap);
    });
    function drawMap(error, usdata) {

        var d = [],
                d1 = [];

        if (scselection == "county") {

            usdata.splice(0, 1);
            countyNameObj.length = 0;
            usdata.forEach(function(element) {
                var nameObj = {};
                nameObj[Math.floor(element[1])] = element[0];
                countyNameObj.push(nameObj);
                if (element[1] > 0)
                    d.push(parseInt(element[1]));
                if (element[1] > 0)
                    d1.push(parseInt(element[2] + element[3]));
            });
        } else {
            usdata.splice(0, 1);
            stateNameObj.length = 0;
            usdata.forEach(function(element) {
                var nameObj = {};
                nameObj[Math.floor(element[1])] = element[0]; //for age variables
                nameObj[element[2]] = element[0];
                stateNameObj.push(nameObj);
                if (element[1] > 0)
                    d.push(parseInt(element[1]));
                if (element[1] > 0)
                    d1.push(parseInt(element[2]));

            });
        }

        var arr = [];
        arr.push(d);
        arr.push(d1);


        //linear scale for linear gradient from color1 to color2
        var quantize = d3.scale.linear()
                .domain([d3.min(arr[0]), d3.max(arr[0])])
                .range(["#f7fcfd", "#00441b"]);

        var projection = d3.geo.albersUsa()
                .scale(1040)
                .translate([width / 2, height / 2]);


        var path = d3.geo.path()
                .projection(projection);

        svg.selectAll('g').remove();

        if (scselection == "county") {
            svg.append("g")
                    .attr("class", "legendLinear")
                    .attr("transform", "translate(0,250)");

            var legendLinear = d3.legend.color()
                    .shapeWidth(30)
                    .orient('vertical')
                    .cells(10)
                    .labelFormat(d3.format('.2s'))
                    .scale(quantize);


            var tip = d3.tip()
                    .attr('class', 'd3-tip')
                    .offset([-10, 0])
                    .html(function(d) {

                        var prop = arr[0][arr[1].indexOf(d.id)];
                        var index = parseFloat([arr[1].indexOf(d.id)]);
                        //if(index!=-1)
                        return "<strong>" + countyNameObj[index][prop] + " : </strong> <span>" + d3.format('.2s')(prop) + "<span>";
                    });


            svg.call(tip);
            svg.select(".legendLinear")
                    .call(legendLinear);

            //to show county borders
            svg.append("g")
                    .attr("class", "counties")
                    .selectAll("path")
                    .data(topojson.feature(us, us.objects.counties).features)
                    .enter().append("path")
                    .style("fill", function(d) {

                        //console.log(arr[0][arr[1].indexOf(d.id)]);
                        return quantize(arr[0][arr[1].indexOf(d.id)]);
                    })
                    .attr("d", path)
                    .on("mouseover", tip.show)
                    .on("mouseleave", tip.hide);

            //to show state borders as well
            svg.append("g")
                    .selectAll("path")
                    .data(topojson.feature(us, us.objects.states).features)
                    .enter().append("path")
                    .attr("d", path)
                    .classed("states", "true");
        }
        // else for state selection
        else {

            svg.append("g")
                    .attr("class", "legendLinear")
                    .attr("transform", "translate(0,250)");

            var legendLinear = d3.legend.color()
                    .shapeWidth(30)
                    .orient('vertical')
                    .cells(10)
                    .labelFormat(d3.format('.2s'))
                    .scale(quantize);

            /**
             * tooltip code trial
             */
            var tip = d3.tip()
                    .attr('class', 'd3-tip')
                    .offset([-10, 0])
                    .html(function(d) {

                        var prop = arr[0][arr[1].indexOf(d.id)];
                        console.log(prop);
                        var index = parseFloat([arr[1].indexOf(d.id)]);

                        console.log(stateNameObj[index][prop]);

                        return "<strong>" + stateNameObj[index][prop] + " : </strong> <span>" + d3.format('.2s')(prop) + "<span>";

                    });
            /**
             * tooltip code ends
             */

            svg.call(tip);
            svg.select(".legendLinear")
                    .call(legendLinear);

            //to show state borders only
            svg.append("g")
                    .selectAll("path")
                    .data(topojson.feature(us, us.objects.states).features)
                    .enter().append("path")
                    .attr("d", path)
                    .style("fill", function(d) {
                        // console.log("data", d);
                        // console.log("data id", arr[1].indexOf(d.id));
                        return quantize(arr[0][arr[1].indexOf(d.id)]);
                    })
                    .classed("states", "true")
                    .on("mouseover", tip.show)
                    .on("mouseleave", tip.hide);

        }
        pieChart("pie1");
    }
    function pieChart(pienumber) {
        var svg1 = d3.select("#pie1");
        svg1.selectAll('g').remove();
        svg1 = d3.select("#pie2");
        svg1.selectAll('g').remove();
        svg1 = d3.select("#pie3");
        svg1.selectAll('g').remove();



        if (dataselection.indexOf("B01003_0") == 0) {
            val = "B01003_001E";
        } else
        if (dataselection.indexOf("B01001_0") == 0) {
            //val = "B01001_001E";

            if (dataselection.indexOf("001E") != -1) {
                codes=["B01001_002E","B01001_026E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Male","Female"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            } else
            if (dataselection.indexOf("002E") != -1) {
                codes=["B01001_003E","B01001_004E","B01001_005E","B01001_006E","B01001_007E","B01001_008E","B01001_009E","B01001_010E","B01001_011E","B01001_012E","B01001_013E","B01001_014E","B01001_015E","B01001_016E","B01001_017E","B01001_018E","B01001_019E","B01001_020E","B01001_021E","B01001_022E","B01001_023E","B01001_024E","B01001_025E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                    .defer(d3.json,querystr )
                    .await(function (error, data1) {
                        var sum = 0;
                        var data = [];
                        data1.splice(0, 1);
                        var labelarray = ["Under 5 Years", "5 to 9 Years", "10 to 14 Years", "15 to 17 Years", "18 and 19 Years", "20 Years", "21 Years", "22 to 24 Years", "25 to 29 Years", "30 to 34 Years", "35 to 39 Years", "40 to 44 Years", "45 to 49 Years", "50 to 54 Years", "55 to 59 Years", "60 and 61 Years", "62 to 64 Years", "65 and 66 Years", "67 to 69 Years", "70 to 74 Years", "75 to 79 Years", "80 to 84 Years", "85 Years and over"];
                        data1.splice(0, 1);
                        for(var i = 1;i<codes.length +1;i++) {
                            data1.forEach(function (elem) {
                                if (elem[i] != null)
                                    sum += parseInt(elem[i]);
                            });
                            data.push({
                                label:labelarray[i-1],
                                val: sum,
                                code: codes[i-1]
                            });
                            sum = 0;
                        }
                        drawPieChart(pienumber, data)
                    });
            } else
            if (dataselection.indexOf("026E") != -1) {
                codes=["B01001_027E","B01001_028E","B01001_029E","B01001_030E","B01001_031E","B01001_032E","B01001_033E","B01001_034E","B01001_035E","B01001_036E","B01001_037E","B01001_038E","B01001_039E","B01001_040E","B01001_041E","B01001_042E","B01001_043E","B01001_044E","B01001_045E","B01001_046E","B01001_047E","B01001_048E","B01001_049E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr)
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Under 5 Years", "5 to 9 Years", "10 to 14 Years", "15 to 17 Years", "18 and 19 Years", "20 Years", "21 Years", "22 to 24 Years", "25 to 29 Years", "30 to 34 Years", "35 to 39 Years", "40 to 44 Years", "45 to 49 Years", "50 to 54 Years", "55 to 59 Years", "60 and 61 Years", "62 to 64 Years", "65 and 66 Years", "67 to 69 Years", "70 to 74 Years", "75 to 79 Years", "80 to 84 Years", "85 Years and over"];
                            data1.splice(0, 1);
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
                /*queue()
                        .defer(d3.json, "
                        http://api.census.gov/data/2015/acs1?get=NAME,B01001_027E,B01001_028E,B01001_029E,B01001_030E,B01001_031E,B01001_032E,B01001_033E,B01001_034E,B01001_035E,B01001_036E,B01001_037E,B01001_038E,B01001_039E,B01001_040E,B01001_041E,B01001_042E,B01001_043E,B01001_044E,B01001_045E,B01001_046E,B01001_047E,B01001_048E,B01001_049E&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                        http://api.census.gov/data/2015/acs1?get=NAME,B01001_027E,B01001_028E,B01001_029E,B01001_030E,B01001_031E,B01001_032E,B01001_033E,B01001_034E,B01001_035E,B01001_036E,B01001_037E,B01001_038E,B01001_039E,B01001_040E,B01001_041E,B01001_042E,B01001_043E,B01001_044E,B01001_045E,B01001_046E,B01001_047E,B01001_048E,B01001_049E&for=state:*&key=              576299d4Bf73993515a4994ffe79fcee7fe72B09"
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            var labelarray = ["Under 5 Years", "5 to 9 Years", "10 to 14 Years", "15 to 17 Years", "18 and 19 Years", "20 Years", "21 Years", "22 to 24 Years", "25 to 29 Years", "30 to 34 Years", "35 to 39 Years", "40 to 44 Years", "45 to 49 Years", "50 to 54 Years", "55 to 59 Years", "60 and 61 Years", "62 to 64 Years", "65 and 66 Years", "67 to 69 Years", "70 to 74 Years", "75 to 79 Years", "80 to 84 Years", "85 Years and over"];
                            data1.splice(0, 1);
                            for(var i = 1;i<22;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum
                                });
                                sum = 0;
                            }

                            drawPieChart(pienumber, data)
                        });
*/
            }
        } else
        if (dataselection.indexOf("B01002_0") == 0) {

            if (dataselection.indexOf("001E") != -1){
                codes=[",B01002_002E","B01002_003E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Male","Female"];
                            data1.splice(0, 1);
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
                /*queue()
                        .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B01002_002E,B01002_003E&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            data1.forEach(function (elem) {
                                if (elem[1] != null)
                                    sum += parseInt(elem[1]);
                            });
                            data.push({
                                label: "Male",
                                val: sum
                            });
                            sum = 0;
                            data1.forEach(function (elem) {
                                if (elem[2] != null)
                                    sum += parseInt(elem[2]);
                            });
                            data.push({
                                label: "Female",
                                val: sum
                            });
                            drawPieChart(pienumber, data)
                        });*/
            }
            } else
        if (dataselection.indexOf("B02001_0") == 0) {
            if (dataselection.indexOf("001E") != -1) {
                codes=["B02001_002E","B02001_003E","B02001_004E","B02001_005E","B02001_006E","B02001_007E","B02001_008E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["White Alone","Black or African American Alone","American Indian and Alaska Native Alone","Asian Alone","Native Hawaiian and Other Pacific Islander Alone","Some Other Race Alone","Two or More Races"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            }else
            if (dataselection.indexOf("008E") != -1) {
                codes=["B02001_009R","B02001_010E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Two Races Including Some Other Race","Two Races Excluding Some Other Race, and Three or More Races"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            }
        } else
        if (dataselection.indexOf("B09021_0") == 0) {
            if (dataselection.indexOf("001E") != -1) {
                codesfor3=["B09021_002E","B09021_003E","B09021_004E","B09021_005E","B09021_006E","B09021_007E"]
                codesfor2=["B09021_008E","B09021_015E","B09021_022E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codesfor2.length;i++){
                    querystr = querystr + "," + codesfor2[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                querystr1 = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codesfor3.length;i++){
                    querystr1 = querystr1 + "," + codesfor3[i];
                }
                querystr1 = querystr1 + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .defer(d3.json,querystr1 )
                        .await(function (error, data1,data11) {
                            var sum = 0;
                            var data2 = [];
                            var data3 = [];

                            var labelarray2 = ["18 to 34 Years","35 to 64 Years","65 Years and over"];
                            var labelarray3 = ["Lives Alone", "Householder Living With Spouse or Spouse of Householder", "Householder Living With Unmarried Partner or Unmarried Partner of Householder", "Child of Householder", "Other Relatives", "Other Nonrelatives"];
                            data1.splice(0, 1);
                            data11.splice(0, 1);

                            for(var i = 1;i<codesfor2.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data2.push({
                                    label:labelarray2[i-1],
                                    val: sum,
                                    code: codesfor2[i-1]
                                });
                                sum = 0;
                            }
                            for(var i = 1;i<codesfor3.length +1;i++) {
                                data11.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data3.push({
                                    label:labelarray3[i-1],
                                    val: sum,
                                    code: codesfor3[i-1]
                                });
                                sum = 0;
                            }

                            drawPieChart("pie1", data2);
                            drawPieChart("pie2", data3);
                        });
            }else
            {
                if (dataselection.indexOf("008E") != -1) {
                    codes = ["B09021_009E", "B09021_010E", "B09021_011E", "B09021_012E", "B09021_013E", "B09021_014E"];
                }else
                if (dataselection.indexOf("015E") != -1) {
                    codes = ["B09021_016E", "B09021_017E", "B09021_018E", "B09021_019E", "B09021_020E", "B09021_021E"];
                }else
                if (dataselection.indexOf("022E") != -1) {
                    codes = ["B09021_023E", "B09021_024E", "B09021_025E", "B09021_026E", "B09021_027E", "B09021_028E"];
                }
                    querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                    for (var i = 0; i < codes.length; i++) {
                        querystr = querystr + "," + codes[i];
                    }
                    querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                    queue()
                            .defer(d3.json, querystr)
                            .await(function (error, data1) {
                                var sum = 0;
                                var data = [];
                                data1.splice(0, 1);
                                var labelarray = ["Lives Alone", "Householder Living With Spouse or Spouse of Householder", "Householder Living With Unmarried Partner or Unmarried Partner of Householder", "Child of Householder", "Other Relatives", "Other Nonrelatives"];

                                for (var i = 1; i < codes.length + 1; i++) {
                                    data1.forEach(function (elem) {
                                        if (elem[i] != null)
                                            sum += parseInt(elem[i]);
                                    });
                                    data.push({
                                        label: labelarray[i - 1],
                                        val: sum,
                                        code: codes[i - 1]
                                    });
                                    sum = 0;
                                }
                                drawPieChart("pie1", data)
                            });
                }

        } else
        if (dataselection.indexOf("C05002_0") == 0) {
            if (dataselection.indexOf("001E") != -1) {
                codes=["C05002_002E","C05002_008E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Native","Foreign Born"];
                            data1.splice(0, 1);
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            }else
            if (dataselection.indexOf("002E") != -1) {
                codes=["C05002_003E","C05002_004E","C05002_005E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Born in State of Residence","Born in Other State in the United States","Born Outside the United States"];
                            data1.splice(0, 1);
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            }else
            if (dataselection.indexOf("005E") != -1) {
                codes=["C05002_006E","C05002_007E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Puerto Rico","U.s. Island Areas or Born Abroad of American Parent(S)"];
                            data1.splice(0, 1);
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            }
            /*queue()
                    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,C05002_002E,C05002_008E&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                    .await(function(error, data1) {
                        var sum = 0;
                        var data = [];
                        data1.splice(0, 1);
                        data1.forEach(function(elem) {
                            if (elem[1] != null)
                                sum += parseInt(elem[1]);
                        });
                        data.push({
                            label: "Native",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[2]);
                        });
                        data.push({
                            label: "Foreign Born",
                            val: sum
                        });
                        drawPieChart(pienumber, data)
                    });
            */
        } else
        if (dataselection.indexOf("B19013_0") == 0) {
            val = "B19013_001E";
        } else
        if (dataselection.indexOf("B19301_0") == 0) {
            val = "B19301_001E";
        } else
        if (dataselection.indexOf("B17002_0") == 0) {
            if (dataselection.indexOf("001E") != -1) {

                codes=["B17002_002E","B17002_003E","B17002_004E","B17002_005E","B17002_006E","B17002_007E","B17002_008E","B17002_009E","B17002_010E","B17002_011E","B17002_012E","B17002_013E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Under .50", ".50 to .74", ".75 to .99", "1.00 to 1.24", "1.25 to 1.49", "1.50 to 1.74", "1.75 to 1.84", "1.85 to 1.99", "2.00 to 2.99", "3.00 to 3.99", "4.00 to 4.99", "5.00 and over"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            }
            /*queue()
                    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B17002_002E,B17002_003E,B17002_004E,B17002_005E,B17002_006E,B17002_007E,B17002_008E,B17002_009E,B17002_010E,B17002_011E,B17002_012E,B17002_013E&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                    .await(function(error, data1) {
                        var sum = 0;
                        var data = [];
                        data1.splice(0, 1);
                        data1.forEach(function(elem) {
                            if (elem[1] != null)
                                sum += parseInt(elem[1]);
                        });
                        data.push({
                            label: "Under .50",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[2]);
                        });
                        data.push({
                            label: ".50 to .74",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[3]);
                        });
                        data.push({
                            label: ".75 to .99",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[4]);
                        });
                        data.push({
                            label: "1.00 to 1.24",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[5]);
                        });
                        data.push({
                            label: "1.25 to 1.49",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[6]);
                        });
                        data.push({
                            label: "1.50 to 1.74",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[7]);
                        });
                        data.push({
                            label: "1.75 to 1.84",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[8]);
                        });
                        data.push({
                            label: "1.85 to 1.99",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[9]);
                        });
                        data.push({
                            label: "2.00 to 2.99",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[10]);
                        });
                        data.push({
                            label: "3.00 to 3.99",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[11]);
                        });
                        data.push({
                            label: "4.00 to 4.99",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[12]);
                        });
                        data.push({
                            label: "5.00 and over",
                            val: sum
                        });
                        drawPieChart(pienumber, data)
                    });*/
        } else
        if (dataselection.indexOf("B06012_0") == 0) {
            if (dataselection.indexOf("001E") != -1) {
                codesfor3=["B06012_002E","B06012_003E","B06012_004E"];
                codesfor2=["B06012_005E","B06012_009E","B06012_013E","B06012_017E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codesfor3.length;i++){
                    querystr = querystr + "," + codesfor3[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                querystr1 = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codesfor2.length;i++){
                    querystr1 = querystr1 + "," + codesfor2[i];
                }
                querystr1 = querystr1 + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .defer(d3.json,querystr1 )
                        .await(function (error, data1, data11) {
                            var sum = 0;
                            var data3 = [];
                            var data2 = [];
                            data1.splice(0, 1);
                            data11.splice(0, 1);

                            var labelarray3 = ["Below 100 Percent of the Poverty Level","100 to 149 Percent of the Poverty Level","At or Above 150 Percent of the Poverty Level"];
                            var labelarray2 = ["Born in State of Residence","Born in Other State in the United States","Native; Born Outside the United States","Foreign Born"];
                            for(var i = 1;i<codesfor3.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data3.push({
                                    label:labelarray3[i-1],
                                    val: sum,
                                    code: codesfor3[i-1]
                                });
                                sum = 0;
                            }

                            for(var i = 1;i<codesfor2.length +1;i++) {
                                data11.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data2.push({
                                    label:labelarray2[i-1],
                                    val: sum,
                                    code: codesfor2[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart("pie1", data2)
                            drawPieChart("pie2", data3)
                        });
            }else
            if (dataselection.indexOf("005E") != -1) {
                codes=["B06012_006E","B06012_007E","B06012_008E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Below 100 Percent of the Poverty Level","100 to 149 Percent of the Poverty Level","At or Above 150 Percent of the Poverty Level"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            } else
            if (dataselection.indexOf("009E") != -1) {
                codes=["B06012_010E","B06012_011E","B06012_012E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Below 100 Percent of the Poverty Level","100 to 149 Percent of the Poverty Level","At or Above 150 Percent of the Poverty Level"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            } else
            if (dataselection.indexOf("013E") != -1) {
                codes=["B06012_014E","B06012_015E","B06012_016E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Below 100 Percent of the Poverty Level","100 to 149 Percent of the Poverty Level","At or Above 150 Percent of the Poverty Level"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            } else
            if (dataselection.indexOf("017E") != -1) {
                codes=["B06012_018E","B06012_019E","B06012_020E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Below 100 Percent of the Poverty Level","100 to 149 Percent of the Poverty Level","At or Above 150 Percent of the Poverty Level"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            }
        } else
        if (dataselection.indexOf("B06009_0") == 0) {
            /*val = "B06009_001E";
            queue()
                    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B06009_007E,B06009_013E,B06009_019E,B06009_025E&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B06009_002E,B06009_003E,B06009_004E,B06009_005E,B06009_006E&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                    .await(function(error, data1, data2) {
                        var sum = 0;
                        var data = [];
                        data1.splice(0, 1);
                        data1.forEach(function(elem) {
                            if (elem[1] != null)
                                sum += parseInt(elem[1]);
                        });
                        data.push({
                            label: "Born in State of Residence",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[2]);
                        });
                        data.push({
                            label: "Born in Other State in the United States",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[3]);
                        });
                        data.push({
                            label: "Native; Born Outside the United States",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[4]);
                        });
                        data.push({
                            label: "Foreign Born",
                            val: sum
                        });
                        sum = 0;

                        drawPieChart('pie1', data);


                        var sum = 0;
                        var data = [];
                        data2.splice(0, 1);
                        data2.forEach(function(elem) {
                            if (elem[1] != null)
                                sum += parseInt(elem[1]);
                        });
                        data.push({
                            label: "Less than High School Graduate",
                            val: sum
                        });
                        sum = 0;
                        data2.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[2]);
                        });
                        data.push({
                            label: "High School Graduate (Includes Equivalency)",
                            val: sum
                        });
                        sum = 0;
                        data2.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[3]);
                        });
                        data.push({
                            label: "Some College or Associate's Degree",
                            val: sum
                        });
                        sum = 0;
                        data2.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[4]);
                        });
                        data.push({
                            label: "Bachelor's Degree",
                            val: sum
                        });
                        sum = 0;
                        data2.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[5]);
                        });
                        data.push({
                            label: "Graduate or Professional Degree",
                            val: sum
                        });

                        drawPieChart('pie2', data)
                    });
                    */
            if (dataselection.indexOf("001E") != -1) {
                codesfor3=["B06012_002E","B06012_003E","B06012_004E","B06012_005E","B06012_006E"];
                codesfor2=["B06012_007E","B06012_013E","B06012_019E","B06012_025E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codesfor3.length;i++){
                    querystr = querystr + "," + codesfor3[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                querystr1 = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codesfor2.length;i++){
                    querystr1 = querystr1 + "," + codesfor2[i];
                }
                querystr1 = querystr1 + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .defer(d3.json,querystr1 )
                        .await(function (error, data1, data11) {
                            var sum = 0;
                            var data3 = [];
                            var data2 = [];
                            data1.splice(0, 1);
                            data11.splice(0, 1);


                            var labelarray3 = ["Less than High School Graduate","High School Graduate (Includes Equivalency)","Some College or Associate's Degree","Bachelor's Degree","Graduate or Professional Degree"];
                            var labelarray2 = ["Born in State of Residence","Born in Other State in the United States","Native; Born Outside the United States","Foreign Born"];
                            for(var i = 1;i<codesfor3.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data3.push({
                                    label:labelarray3[i-1],
                                    val: sum,
                                    code: codesfor3[i-1]
                                });
                                sum = 0;
                            }

                            for(var i = 1;i<codesfor2.length +1;i++) {
                                data11.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data2.push({
                                    label:labelarray2[i-1],
                                    val: sum,
                                    code: codesfor2[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart("pie1", data2)
                            drawPieChart("pie2", data3)
                        });
            }else
            if (dataselection.indexOf("007E") != -1) {
                codes=["B06012_008E","B06012_009E","B06012_010E","B06012_011E","B06012_012E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Less than High School Graduate","High School Graduate (Includes Equivalency)","Some College or Associate's Degree","Bachelor's Degree","Graduate or Professional Degree"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            } else
            if (dataselection.indexOf("013E") != -1) {
                codes=["B06012_014E","B06012_015E","B06012_016E","B06012_017E","B06012_018E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Less than High School Graduate","High School Graduate (Includes Equivalency)","Some College or Associate's Degree","Bachelor's Degree","Graduate or Professional Degree"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            } else
            if (dataselection.indexOf("019E") != -1) {
                codes=["B06012_020E","B06012_021E","B06012_022E","B06012_023E","B06012_024E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Below 100 Percent of the Poverty Level","100 to 149 Percent of the Poverty Level","At or Above 150 Percent of the Poverty Level"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            } else
            if (dataselection.indexOf("025E") != -1) {
                codes=["B06012_026E","B06012_027E","B06012_028E","B06012_029E","B06012_030E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Below 100 Percent of the Poverty Level","100 to 149 Percent of the Poverty Level","At or Above 150 Percent of the Poverty Level"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            }
        } else
        if (dataselection.indexOf("B08303_0") == 0) {
            if (dataselection.indexOf("001E") != -1) {


                codes = ["B08303_002E", "B08303_003E", "B08303_004E", "B08303_005E", "B08303_006E", "B08303_007E", "B08303_008E", "B08303_009E", "B08303_010E", "B08303_011E", "B08303_012E", "B08303_013E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for (var i = 0; i < codes.length; i++) {
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json, querystr)
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Less than 5 Minutes", "5 to 9 Minutes", "10 to 14 Minutes", "15 to 19 Minutes", "20 to 24 Minutes", "25 to 29 Minutes", "30 to 34 Minutes", "35 to 39 Minutes", "40 to 44 Minutes", "45 to 59 Minutes", "60 to 89 Minutes", "90 or More Minutes"];
                            for (var i = 1; i < codes.length + 1; i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label: labelarray[i - 1],
                                    val: sum,
                                    code: codes[i - 1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
                /*queue()
                    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B08303_002E,B08303_003E,B08303_004E,B08303_005E,B08303_006E,B08303_007E,B08303_008E,B08303_009E,B08303_010E,B08303_011E,B08303_012E,B08303_013E&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                    .await(function(error, data1) {
                        var sum = 0;
                        var data = [];
                        data1.splice(0, 1);
                        data1.forEach(function(elem) {
                            if (elem[1] != null)
                                sum += parseInt(elem[1]);
                        });
                        data.push({
                            label: "Under .50",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[2]);
                        });
                        data.push({
                            label: "5 to 9 Minutes",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[3]);
                        });
                        data.push({
                            label: "10 to 14 Minutes",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[4]);
                        });
                        data.push({
                            label: "15 to 19 Minutes",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[5]);
                        });
                        data.push({
                            label: "20 to 24 Minutes",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[6]);
                        });
                        data.push({
                            label: "25 to 29 Minutes",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[7]);
                        });
                        data.push({
                            label: "30 to 34 Minutes",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[8]);
                        });
                        data.push({
                            label: "35 to 39 Minutes",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[9]);
                        });
                        data.push({
                            label: "40 to 44 Minutes",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[10]);
                        });
                        data.push({
                            label: "45 to 59 Minutes",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[11]);
                        });
                        data.push({
                            label: "60 to 89 Minutes",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[12]);
                        });
                        data.push({
                            label: "90 or More Minutes",
                            val: sum
                        });
                        drawPieChart(pienumber, data)
                    });
            */
            }
        }
        if (dataselection.indexOf("B08301_0") == 0) {
            if (dataselection.indexOf("001E") != -1) {
                codes=["B08301_002E","B08301_010E","B08301_016E","B08301_017E","B08301_018E","B08301_019E","B08301_020E","B08301_021E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Car, Truck, or Van","Public Transportation (Excluding Taxicab)","Taxicab","Motorcycle","Bicycle","Walked","Other Means","Worked at Home"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            } else
            if (dataselection.indexOf("002E") != -1) {
                codes=["B08301_003E","B08301_004E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Drove Alone","Carpooled"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            } else
            if (dataselection.indexOf("004E") != -1) {
                codes=["B08301_005E","B08301_006E","B08301_007E","B08301_008E","B08301_009E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["In 2-Person Carpool","In 3-Person Carpool","In 4-Person Carpool","In 5- or 6-Person Carpool","In 7-or-More-Person Carpool"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            } else
            if (dataselection.indexOf("010E") != -1) {
                codes=["B08301_011E","B08301_012E","B08301_013E","B08301_014E","B08301_015E"];
                querystr = "http://api.census.gov/data/2015/acs1?get=NAME";
                for(var i =0;i<codes.length;i++){
                    querystr = querystr + "," + codes[i];
                }
                querystr = querystr + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09";
                queue()
                        .defer(d3.json,querystr )
                        .await(function (error, data1) {
                            var sum = 0;
                            var data = [];
                            data1.splice(0, 1);
                            var labelarray = ["Bus or Trolley Bus","Streetcar or Trolley Car (Carro Publico in Puerto Rico)","Subway or Elevated","Railroad","Ferryboat"];
                            for(var i = 1;i<codes.length +1;i++) {
                                data1.forEach(function (elem) {
                                    if (elem[i] != null)
                                        sum += parseInt(elem[i]);
                                });
                                data.push({
                                    label:labelarray[i-1],
                                    val: sum,
                                    code: codes[i-1]
                                });
                                sum = 0;
                            }
                            drawPieChart(pienumber, data)
                        });
            }
            /*queue()
                    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B08301_002E,B08301_010E,B08301_016E,B08301_017E,B08301_018E,B08301_019E,B08301_020E,B08301_021E&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                    .await(function(error, data1) {
                        var sum = 0;
                        var data = [];
                        data1.splice(0, 1);
                        data1.forEach(function(elem) {
                            if (elem[1] != null)
                                sum += parseInt(elem[1]);
                        });
                        data.push({
                            label: "Car, Truck, or Van",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[2]);
                        });
                        data.push({
                            label: "Public Transportation (Excluding Taxicab)",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[3]);
                        });
                        data.push({
                            label: "Taxicab",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[4]);
                        });
                        data.push({
                            label: "Motorcycle",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[5]);
                        });
                        data.push({
                            label: "Bicycle",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[6]);
                        });
                        data.push({
                            label: "Walked",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[7]);
                        });
                        data.push({
                            label: "Other Means",
                            val: sum
                        });
                        sum = 0;
                        data1.forEach(function(elem) {
                            if (elem[2] != null)
                                sum += parseInt(elem[8]);
                        });
                        data.push({
                            label: "Worked at Home",
                            val: sum
                        });
                        drawPieChart(pienumber, data)
                    });
            */
        }
    }

    function drawPieChart(pienumber, data1) {

        var width = window.height *0.5,
                height = window.height*0.5 ,
                radius = Math.min(width, height) / 2;


        //ordinal scale to have different colors for different sections
        var color = d3.scale.ordinal()
                .range(['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928']);

        var arc = d3.svg.arc()
                .outerRadius(radius - 10)
                .innerRadius(radius - 100);

        var pie = d3.layout.pie()
                .sort(null)
                .value(function(d) {
                    return d.val;
                });

        var svg1 = d3.select("#" + pienumber);
        svg1.selectAll('g').remove();

        var piegroup = svg1.append("g")
                .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

        var path = piegroup.selectAll('path')
                .data(pie(data1))
                .enter()
                .append('path')
                .attr('d', arc)
                .style('fill',function(d){
                    return color(d.data.label);
                })
                .on("click",function(d){
                    var str = d.data.code;
                    dataselection = str;//.slice(0, 6) + "_" + str.slice(6 , 9)+"E";
                    scselection = $('#disptype input:radio:checked').val() ;
                    queue()
                            .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME," + dataselection + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                            .await(drawMap);
                });
        /*working
        var g = piegroup.selectAll(".arc")
                .data(pie(data1))
                .enter()
                .append("g")
                .attr("class", "arc");

        g.append("path")
                .attr("d", arc)
                .style("fill", function(d) {
                    return color(d.data.label);
                });
*/
        /*g.append("text")
         .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
         .attr("dy", ".35em")
         .text(function(d) { return d.data.label; });
         */

        function type(d) {
            d.population = +d.population;
            return d;
        }
    }
</script>
</body>
</html>