<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <style>
        .counties
        {
            fill: gray;
            stroke: black;
            stroke-width: .1px;
        }

        path
        {
            fill: white;
            stroke: black;
            stroke-width: 0.1px;
        }

        .states
        {
            fill: none;
            stroke: #black;
            stroke-linejoin: round;
            stroke-width: 0.1px;
        }
        .sidemenuitem{
            width:100%;
            padding: 20px;
            font-size: 1.6em;
            white-space: normal;
            text-align: left;
        }
        .firstlevel{
            text-align: left;
            font-size: 1.6em;
        }
        .secondlevel{
            text-align: center;
            font-size: 1.4em;
        }
        .thirdlevel{
            text-align: right;
            font-size: 1.2em;
        }
        .fourthlevel{
            font-size: 1.2em;
            text-align: right;
            font-style: italic;
        }
        .d3-tip
        {
            font-weight: bold;
            line-height: 1;

            padding: 12px;

            color: #fff;
            border-radius: 2px;
            background: rgba(0, 0, 0, .8);
        }

        .d3-tip:after
        {
            font-size: 10px;
            line-height: 1;

            position: absolute;

            display: inline;

            box-sizing: border-box;
            width: 100%;

            content: '\25BC';
            text-align: center;

            color: rgba(0, 0, 0, .8);
        }

        .d3-tip.n:after
        {
            top: 100%;
            left: 0;

            margin: -1px 0 0 0;
        }
        body,html{
            /*height:1080px;*/
        }
        #menudiv{
            height: 100vh;
        }
        .sidemenucontainer{
            height:90%;
            overflow-y: scroll;
        }
        .view {
            fill: none;
            stroke: #000;
        }
    </style>
</head>
<body>
<div class="container" style="border: solid;border-color: black;border-width: 1px;width: 100vw;">
    <div class="row" style="border: solid;border-color: black;border-width: 1px;">
        <div id="menudiv" class="col-md-2" style="border: solid;border-color: black;border-width: 1px;">
            <div>
                <p style="height: 5vh;line-height: 5vh;text-align: left;">
                    Menu
                </p>
                <span><button id="menuback" class="btn btn-default hidden">back</button></span>
            </div>
            <div class="btn-group sidemenucontainer" id="level1dataset" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default active sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" checked value="dataset1">Total population within the locality
                </label>
                <!--<button class="btn sidemenuitem">Total population within the locality</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset2">Age distribution broken down by sex
                </label>
                <!--<button class="btn sidemenuitem">Age distribution broken down by sex</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset3">Median age by sex
                </label>
                <!--<button class="btn sidemenuitem">Median age by sex</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset4">Race
                </label>
                <!--<button class="btn sidemenuitem">Race</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset5">Living arrangement for adults (18 years and over)
                </label>
                <!--    <button class="btn sidemenuitem">Living arrangement for adults (18 years and over)</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset6">Place of birth by nativity
                </label>
                <!--<button class="btn sidemenuitem">Place of birth by nativity</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset7">Median household income
                </label>
                <!--<button class="btn sidemenuitem">Median household income</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset8">Per capita income
                </label>
                <!--<button class="btn sidemenuitem">Per capita income</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset9">Income to poverty-level ratio
                </label>
                <!--<button class="btn sidemenuitem">Income to poverty-level ratio</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset10">Poverty level by place of birth
                </label>
                <!--<button class="btn sidemenuitem">Poverty level by place of birth</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset11">Educational attainment by place of birth
                </label>
                <!--<button class="btn sidemenuitem">Educational attainment by place of birth</button>-->
                <label class="btn btn-default sidemenuitem" >
                    <input type="radio" class="toggle" name="datasettype" value="dataset12">Travel time to work
                </label>
                <!--<button class="btn sidemenuitem">Travel time to work</button>-->
                <label class="btn btn-default sidemenuitem">
                    <input type="radio" class="toggle" name="datasettype" value="dataset13">Means of transportation to work
                </label>
                <!--<button class="btn sidemenuitem">Means of transportation to work</button>-->
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset1" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default active sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset" checked value="B01003_001E">Total
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset2" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_001E">Total
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_002E">Male
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_003E">Under 5 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_004E">5 to 9 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_005E">10 to 14 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_006E">15 to 17 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_007E">18 and 19 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_008E">20 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_009E">21 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_010E">22 to 24 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_011E">25 to 29 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_012E">30 to 34 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_013E">35 to 39 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_014E">40 to 44 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_015E">45 to 49 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_016E">50 to 54 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_017E">55 to 59 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_018E">60 and 61 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_019E">62 to 64 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_020E">65 and 66 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_021E">67 to 69 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_022E">70 to 74 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_023E">75 to 79 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_024E">80 to 84 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_025E">85 Years and over
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_026E">Female
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_027E">Under 5 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_028E">5 to 9 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_029E">10 to 14 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_030E">15 to 17 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_031E">18 and 19 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_032E">20 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_033E">21 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_034E">22 to 24 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_035E">25 to 29 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_036E">30 to 34 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_037E">35 to 39 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_038E">40 to 44 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_039E">45 to 49 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_040E">50 to 54 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_041E">55 to 59 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_042E">60 and 61 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_043E">62 to 64 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_044E">65 and 66 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_045E">67 to 69 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_046E">70 to 74 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_047E">75 to 79 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_048E">80 to 84 Years
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01001_049E">85 Years and over
                </label>

            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset3" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01002_001E">Median Age: Total
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01002_002E">Median Age: Male
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01002_003E">Median Age: Female
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset4" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_001E">Total
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_002E">White Alone
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_003E">Black or African American Alone
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_004E">American Indian and Alaska Native Alone
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_005E">Asian Alone
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_006E">Native Hawaiian and Other Pacific Islander Alone
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_007E">Some Other Race Alone
                </label>
                <label class="btn btn-default  sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_008E">Two or More Races
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_009E">Two Races Including Some Other Race
                </label>
                <label class="btn btn-default  sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B02001_010E">Two Races Excluding Some Other Race, and Three or More Races
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset5" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B01003_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_002E">Lives Alone
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_003E">Householder Living With Spouse or Spouse of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_004E">Householder Living With Unmarried Partner or Unmarried Partner of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_005E">Child of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_006E">Other Relatives
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_007E">Other Nonrelatives
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_008E">18 to 34 Years
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_009E">Lives Alone
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_010E">Householder Living With Spouse or Spouse of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_011E">Householder Living With Unmarried Partner or Unmarried Partner of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_012E">Child of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_013E">Other Relatives
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_014E">Other Nonrelatives
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_015E">35 to 64 Years
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_016E">Lives Alone
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_017E">Householder Living With Spouse or Spouse of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_018E">Householder Living With Unmarried Partner or Unmarried Partner of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_019E">Child of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_020E">Other Relatives
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_021E">Other Nonrelatives
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_022E">65 Years and over
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_023E">Lives Alone
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_024E">Householder Living With Spouse or Spouse of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_025E">Householder Living With Unmarried Partner or Unmarried Partner of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003026">Child of Householder
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_027E">Other Relatives
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B01003_028E">Other Nonrelatives
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset6" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="C05002_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_002E">Native
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_003E">Born in State of Residence
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_004E">Born in Other State in the United States
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_005E">Born Outside the United States
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_006E">Puerto Rico
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_007E">U.s. Island Areas or Born Abroad of American Parent(S)
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="C05002_008E">Foreign Born
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset7" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B19013_001E">Total
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset8" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B19301_001E">Total
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset9" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B17002_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_002E">Under .50
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_003E">.50 to .74
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_004E">.75 to .99
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_005E">1.00 to 1.24
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_006E">1.25 to 1.49
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_007E">1.50 to 1.74
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_008E">1.75 to 1.84
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_009E">1.85 to 1.99
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_010E">2.00 to 2.99
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_011E">3.00 to 3.99
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_012E">4.00 to 4.99
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B17002_013E">5.00 and over
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset10" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B19301_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_002E">Below 100 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_003E">100 to 149 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_004E">At or Above 150 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_005E">Born in State of Residence
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_006E">Below 100 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_007E">100 to 149 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_008E">At or Above 150 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_009E">Born in Other State in the United States
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_010E">Below 100 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_011E">100 to 149 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_012E">At or Above 150 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_013E">Native; Born Outside the United States
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_014E">Below 100 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_015E">100 to 149 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_016E">At or Above 150 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_017E">Foreign Born
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_018E">Below 100 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_019E">100 to 149 Percent of the Poverty Level
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B19301_020E">At or Above 150 Percent of the Poverty Level
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset11" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B06009_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_002E">Less than High School Graduate
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_003E">High School Graduate (Includes Equivalency)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_004E">Some College or Associate's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_005E">Bachelor's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_006E">Graduate or Professional Degree
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_007E">Born in State of Residence
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_008E">Less than High School Graduate
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_009E">High School Graduate (Includes Equivalency)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_010E">Some College or Associate's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_011E">Bachelor's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_012E">Graduate or Professional Degree
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_013E">Born in Other State in the United States
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_014E">Less than High School Graduate
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_015E">High School Graduate (Includes Equivalency)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_016E">Some College or Associate's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_017E">Bachelor's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_018E">Graduate or Professional Degree
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_019E">Native; Born Outside the United States
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_020E">Less than High School Graduate
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_021E">High School Graduate (Includes Equivalency)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_022E">Some College or Associate's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_023E">Bachelor's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_024E">Graduate or Professional Degree
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_025E">Foreign Born
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_026E">Less than High School Graduate
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_027E">High School Graduate (Includes Equivalency)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_028E">Some College or Associate's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_029E">Bachelor's Degree
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B06009_030E">Graduate or Professional Degree
                </label>
            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset12" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_002E">Less than 5 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_003E">5 to 9 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_004E">10 to 14 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_005E">15 to 19 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_006E">20 to 24 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_007E">25 to 29 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_008E">30 to 34 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_009E">35 to 39 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_010E">40 to 44 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_011E">45 to 59 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_012E">60 to 89 Minutes
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08303_013E">90 or More Minutes
                </label>

            </div>
            <div class="btn-group sidemenucontainer hidden" id="dataset13" data-toggle="buttons" style="width: 100%;">
                <label class="btn btn-default  sidemenuitem firstlevel" >
                    <input type="radio" class="toggle" name="dataset"  value="B08301_001E">Total
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_002E">Car, Truck, or Van
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_003E">Drove Alone
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_004E">Carpooled
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_005E">In 2-Person Carpool
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_006E">In 3-Person Carpool
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_007E">In 4-Person Carpool
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_008E">In 5- or 6-Person Carpool
                </label>
                <label class="btn btn-default sidemenuitem fourthlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_009E">In 7-or-More-Person Carpool
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_010E">Public Transportation (Excluding Taxicab)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_011E">Bus or Trolley Bus
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_012E">Streetcar or Trolley Car (Carro Publico in Puerto Rico)
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_013E">Subway or Elevated
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_014E">Railroad
                </label>
                <label class="btn btn-default sidemenuitem thirdlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_015E">Ferryboat
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_016E">Taxicab
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_017E">Motorcycle
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_018E">Bicycle
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_019E">Walked
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_020E">Other Means
                </label>
                <label class="btn btn-default sidemenuitem secondlevel" >
                    <input type="radio" class="toggle" name="dataset" value="B08301_021E">Worked at Home
                </label>

            </div>
        </div>
        <div class="col-md-10">
            <div class="row">
            <div class="col-md-12">
                <h1>Title</h1>
            </div>
        </div>
            <div class="row">
            <div class="col-md-6" style="border-style: solid;border-color: black;height: 90vh;">
                <button class="btn btn-default" id="resetchoropeth">Reset</button>
                <svg id="choropeth" width="800" height="640">

                </svg>
                <div class="btn-group" id="disptype" data-toggle="buttons" style="width: 100%;margin-top: 10px;">
                <label class="btn btn-default blue active" style="width: 25%;margin-left: 30px;border-radius: 2px;">
                    <input type="radio" class="toggle" checked name="disp" value="state"> States
                </label>
                <label class="btn btn-default blue" style="width: 25%;margin-left: 25%;border-radius: 2px;">
                    <input type="radio" class="toggle" name="disp" value="county"> Counties
                </label>
            </div>
            </div>
            <div class="col-md-6" style="border-style: solid;border-color: black;height: 90vh;">
                <button class="btn btn-default" id="resetbutton">Reset</button>
                <svg id="scatterplot" width="800" height="900">

                </svg>
                <!--<label class="" >x Axis code
                    <input type="text" name="xdata" >
                </label>
                <label class="" >y Axis code
                    <input type="text" name="ydata" >
                </label>
                <label class="" >z Axis code
                    <input type="text" name="zdata" >
                </label>-->
            </div>
        </div>
        </div>
    </div>
</div>
<script src="js/d3.v3.min.js"></script>
<script src="//d3js.org/topojson.v1.min.js"></script>
<script src="http://d3js.org/queue.v1.min.js"></script>
<script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
<script src="js/legend.js" charset="utf-8"></script>
<script src="js/jquery-3.1.0.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script>
    var scselection = "state";
    var stateNameObj = [];
    var countyNameObj = [];
    var us, one;
    var scselection= "state"; //state or count selection
    var dataselection; //dataset selection
    var selectedstate = null;
    var svg = d3.select("#choropeth"),
            width = +svg.attr("width"),
            height = +svg.attr("height");
    $(document).ready(function() {
        //console.log(window.innerWidth,window.innerHeight);
        scselection = $('#disptype input:radio:checked').val() ;
        queue()
                .defer(d3.json, "js/us.json")
                .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B01003_001E&for=state:*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                .await(ready);
    });
    function ready(error, us1, data1) {
        us = us1;
        one = data1;
        drawMap(null, one);
    }
    $("input[name=datasettype]").change(function(){
        var t = $('#level1dataset input:radio:checked').val();
        $("#"+t).removeClass("hidden");
        $("#"+t).addClass("activemenu");
        $('#level1dataset').addClass("hidden")
        $('#menuback').removeClass('hidden');
        $( "#"+t +" label:first-child").click();
    });
    $("#menuback").click(function(){
        $(".activemenu").addClass("hidden");
        $('#level1dataset').removeClass("hidden");
        $(".activemenu").removeClass("activemenu");
        $('#menuback').addClass('hidden');
    });
    $("input[name=dataset]").change(function(){
        var str = this.value;
        dataselection = str;//.slice(0, 6) + "_" + str.slice(6 , 9)+"E";
        scselection = $('#disptype input:radio:checked').val() ;
        queue()
                .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME," + dataselection + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                .await(drawMap);
    });
    $("input[name=disp]").change(function() {
        dataselection = $('#'+ $('#level1dataset input:radio:checked').val()+' input:radio:checked').val();
        scselection = $('#disptype input:radio:checked').val();
        queue()
                .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME," + dataselection + "&for=" + scselection + ":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                .await(drawMap);
    });
    function scatter(scatterplot){
        var str1,str2,str3;
        str1 = "B09021_009E";//$("input [name=xdata]").val();
        str2 = "B09021_010E";//$("input [name=ydata]").val();
        str3 = "B09021_011E";//$("input [name=zdata]").val();
        queue()
                .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME," + str1 + "," + str2 + "," + str3 +"&for="+scselection+":*&key=576299d4bf73993515a4994ffe79fcee7fe72b09")
                .await(function(error,usdata){
                    var v1={id:[],name:[],array:[]},v2={id:[],name:[],array:[]},v3={id:[],name:[],array:[]};
                    usdata.forEach(function(elem){
                        if(elem[1]>0) {
                            v1.id.push(parseInt(elem[4] + elem[5]));
                            v1.array.push(parseInt(elem[1]));
                            v1.name.push(elem[0]);
                        }
                        if(elem[2]>0){
                            v2.id.push(parseInt(elem[4] + elem[5]));
                            v2.array.push(parseInt(elem[2]));
                            v2.name.push(elem[0]);
                        }
                        if(elem[3]>0){
                            v3.id.push(parseInt(elem[4] + elem[5]));
                            v3.array.push(parseInt(elem[3]));
                            v3.name.push(elem[0]);
                        }
                    });
                    drawScatterChart(scatterplot,v1,v2,v3);
                });
    }
    function drawScatterChart(scatterplot,variable, variable1, variable2) {

        var maxValuex = d3.max(variable.array);
        var maxValuey = d3.max(variable1.array);
        var maxValuer = d3.max(variable2.array);

        // chart size
        var svg = d3.select("#"+scatterplot),
                chartWidth = +svg.attr("width")-200,
                chartHeight = +svg.attr("height")-200;

        var zoom = d3.behavior.zoom()
                .scaleExtent([1, 10])
                .on("zoom", zoomed);

        var drag = d3.behavior.drag()
                .origin(function(d) { return d; })
                .on("dragstart", dragstarted)
                .on("drag", dragged)
                .on("dragend", dragended);

        // create a y scale
        var yScale = d3.scale.linear()
                .domain([0, maxValuey+0.2*maxValuey])
                .range([chartHeight, 0]);

        var xScale = d3.scale.linear()
                .domain([0, maxValuex + 0.2*maxValuex])
                .range([0, chartWidth]);

        var quantize = d3.scale.linear()
                .domain([d3.min(variable2.array),maxValuer])
                .range(["#f7fcfd", "#00441b"]);
        /*var rScale = d3.scale.linear()
                .domain([0, maxValuer])
                .range([2, 15]);*/

        // create a group for the bar chart
        //d3.select("#label")
        //        .html(localityName +
        //                ": Total Primary Energy Production (Quadrillion BTU)"
        //        );

        svg.selectAll('g').remove();
        var group = svg.append("g")
                .attr("transform", "translate(100, 100)")
                .call(zoom);

        /*
                .on("mouseover", function(d, i) {
                    d3.select("#"+scatterplot).append("rect")
                            .attr("transform", "translate(100, 50)")
                            .style("fill", "white")
                            .style("stroke", "black")
                            .attr("width", "130")
                            .attr("height", "30")
                            .attr({
                                id: "r" + i, // Create an id for text so we can select it later for removing on mouseout
                                x: function() {
                                    return 10;
                                },
                                y: function() {
                                    return 10;
                                }
                            });

                    d3.select("#"+scatterplot).append("text")
                            .attr("transform", "translate(100, 50)")
                            .attr({
                                id: "t" + i, // Create an id for text so we can select it later for removing on mouseout
                                x: function() {
                                    return 20;
                                },
                                y: function() {
                                    return 20;
                                }
                            })
                            .text(function() {
                                return d;
                            });
                    console.log(d);
                    return hoverfn.style("visibility", "visible").text(d + ": x=" + variable.array[variable.name.indexOf(d)] +", y="+variable1.array[variable1.name.indexOf(d)]);
                })
                .on("mouseout", function(d, i) {

                    d3.select("#t" + i).remove(); // Remove text location
                    d3.select("#r" + i).remove(); // Remove text location
                })
                .on("mousemove", function (d, i) {
                    return hoverfn.style("top", (event.pageY - 10) + "px").style("left", (event.pageX + 10) + "px").text(d + ": x=" + variable.array[variable.name.indexOf(d)] +", y="+variable1.array[variable1.name.indexOf(d)]);
                })
                .on("mouseout", function (d) {
                    return hoverfn.style("visibility", "hidden");
                });
*/
        var tip = d3.tip()
                .attr('class', 'd3-tip')
                .offset([-10, 0])
                .html(function(d,i) {
                    return "<strong>" + variable.name[i] + " : </strong><div> + + </div>";
                });


        svg.call(tip);
        group.selectAll("circle").data(variable.id).enter().append(
                'circle')
                .attr("cx", function(d, i) {

                    return xScale(variable.array[i]);
                })
                .attr("cy", function(d, i) {

                    return yScale(variable1.array[i]);
                })
                .attr("r", function(d, i) {

                    return 10;//rScale(variable2.array[i]);
                })
                .style("stroke","black")
                .style("stroke-width","1px")
                .style("fill", function(d, i) {
                    return quantize(variable2.array[i]);
                })
                .on("click",function(d,i){
                    selectedstate = d;
                    drawMap();
                })
                .call(drag)
                .on("mouseover", tip.show)
                .on("mouseleave", tip.hide);




        var xAxis = d3.svg.axis()
                .scale(xScale)
                .orient('bottom');

        group.append("g")
                .attr('class', 'axis')
                .attr('transform', 'translate(0,' +chartHeight + ')')
                .call(xAxis)
                .selectAll("text")
                .attr("y", 0)
                .attr("x", 9)
                .attr("dy", ".35em")
                .attr("transform", "rotate(90)")
                .style("text-anchor", "start");

        var yAxis = d3.svg.axis()
                .scale(yScale)
                .orient('left');

        group.append("g")
                .attr('class', 'axis')
                .attr('transform', 'translate(-2,0)')
                .call(yAxis);

        svg.call(zoom);

        function zoomed() {
            group.attr("transform", "translate(" + d3.event.translate + ")scale(" + d3.event.scale + ")");
        }

        function dragstarted(d) {
            d3.event.sourceEvent.stopPropagation();
            d3.select(this).classed("dragging", true);
        }

        function dragged(d) {
            d3.select(this).attr("cx", d.x = d3.event.x).attr("cy", d.y = d3.event.y);
        }

        function dragended(d) {
            d3.select(this).classed("dragging", false);
        }


        $("#resetbutton").click(function() {
            group.attr("transform", "translate(100,100)scale(1)");
        });
    }
    function drawMap(error, usdata) {
if(usdata == null)
usdata = one;
        else {
    one = usdata;
    usdata.splice(0, 1);
}
        var d = [],
                d1 = [];

        if (scselection == "county") {


            countyNameObj.length = 0;
            usdata.forEach(function(element) {
                var nameObj = {};
                nameObj[Math.floor(element[1])] = element[0];
                countyNameObj.push(nameObj);
                if (element[1] > 0)
                    d.push(parseInt(element[1]));
                if (element[1] > 0)
                    d1.push(parseInt(element[2] + element[3]));
            });
        } else {

            stateNameObj.length = 0;
            usdata.forEach(function(element) {
                var nameObj = {};
                nameObj[Math.floor(element[1])] = element[0]; //for age variables
                nameObj[element[2]] = element[0];
                stateNameObj.push(nameObj);
                if (element[1] > 0)
                    d.push(parseInt(element[1]));
                if (element[1] > 0)
                    d1.push(parseInt(element[2]));

            });
        }

        var arr = [];
        arr.push(d);
        arr.push(d1);


        //linear scale for linear gradient from color1 to color2
        var quantize = d3.scale.linear()
                .domain([d3.min(arr[0]), d3.max(arr[0])])
                .range(["#f7fcfd", "#00441b"]);

        var projection = d3.geo.albersUsa()
                .scale(1040)
                .translate([width / 2, height / 2]);


        var path = d3.geo.path()
                .projection(projection);

        svg.selectAll('g').remove();
        var group = svg.append("g")
                .attr("class", "legendLinear")
                .attr("transform", "translate(0,250)");

        var legendLinear = d3.legend.color()
                .shapeWidth(30)
                .orient('vertical')
                .cells(10)
                .labelFormat(d3.format('.2s'))
                .scale(quantize);
        if (scselection == "county") {



            var tip = d3.tip()
                    .attr('class', 'd3-tip')
                    .offset([-10, 0])
                    .html(function(d) {

                        var prop = arr[0][arr[1].indexOf(d.id)];
                        var index = parseFloat([arr[1].indexOf(d.id)]);
                        //if(index!=-1)
                        return "<strong>" + countyNameObj[index][prop] + " : </strong> <span>" + d3.format('.2s')(prop) + "<span>";
                    });


            svg.call(tip);
            svg.select(".legendLinear")
                    .call(legendLinear);

            //to show county borders
            svg.append("g")
                    .attr("class", "counties")
                    .selectAll("path")
                    .data(topojson.feature(us, us.objects.counties).features)
                    .enter().append("path")
                    .style("fill", function(d) {

                        //console.log(arr[0][arr[1].indexOf(d.id)]);
                        return quantize(arr[0][arr[1].indexOf(d.id)]);
                    })
                    .attr("d", path)
                    .on("mouseover", tip.show)
                    .on("mouseleave", tip.hide)
                    .style("stroke-width",function(d){
                        if(selectedstate == d.id)
                            return "3px";
                        else
                            return "0.1px";
                    });

            //to show state borders as well
            svg.append("g")
                    .selectAll("path")
                    .data(topojson.feature(us, us.objects.states).features)
                    .enter().append("path")
                    .attr("d", path)
                    .classed("states", "true");
        }
        // else for state selection
        else {

            /**
             * tooltip code trial
             */
            var tip = d3.tip()
                    .attr('class', 'd3-tip')
                    .offset([-10, 0])
                    .html(function(d) {

                        var prop = arr[0][arr[1].indexOf(d.id)];
                        console.log(prop);
                        var index = parseFloat([arr[1].indexOf(d.id)]);

                        console.log(stateNameObj[index][prop]);

                        return "<strong>" + stateNameObj[index][prop] + " : </strong> <span>" + d3.format('.2s')(prop) + "<span>";

                    });
            /**
             * tooltip code ends
             */

            svg.call(tip);
            svg.select(".legendLinear")
                    .call(legendLinear);

            //to show state borders only
            svg.append("g")
                    .selectAll("path")
                    .data(topojson.feature(us, us.objects.states).features)
                    .enter().append("path")
                    .attr("d", path)
                    .style("fill", function(d) {
                        // console.log("data", d);
                        // console.log("data id", arr[1].indexOf(d.id));
                        return quantize(arr[0][arr[1].indexOf(d.id)]);
                    })
                    .classed("states", "true")
                    .style("stroke-width",function(d){
                        if(selectedstate == d.id)
                            return "3px";
                        else
                            return "0.1px";
                    })
                    .on("mouseover", tip.show)
                    .on("mouseleave", tip.hide);

        }

        scatter("scatterplot");
    }
</script>
</body>
</html>
