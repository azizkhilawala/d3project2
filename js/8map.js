
var biggestObject={
    "Total population within the locality-Total":"B01003_001E",

    "Age distribution broken down by sex-Total":"B01001_001E",
    "Male":"B01001_002E",
    "Under 5 Years":"B01001_003E",
    "5 to 9 Years":"B01001_004E",
    "10 to 14 Years":"B01001_005E",
    "15 to 17 Years":"B01001_006E",
    "18 and 19 Years":"B01001_007E",
    "20 Years":"B01001_008E",
    "21 Years":"B01001_009E",
    "22 to 24 Years":"B01001_010E",
    "25 to 29 Years":"B01001_011E",
    "30 to 34 Years":"B01001_012E",
    "35 to 39 Years":"B01001_013E",
    "40 to 44 Years":"B01001_014E",
    "45 to 49 Years":"B01001_015E",
    "50 to 54 Years":"B01001_016E",
    "55 to 59 Years":"B01001_017E",
    "60 and 61 Years":"B01001_018E",
    "62 to 64 Years":"B01001_019E",
    "65 and 66 Years":"B01001_020E",
    "67 to 69 Years":"B01001_021E",
    "70 to 74 Years":"B01001_022E",
    "75 to 79 Years":"B01001_023E",
    "80 to 84 Years":"B01001_024E",
    "85 Years and over":"B01001_025E",
    "Female":"B01001_026E",
    "Under 5 Years":"B01001_027E",
    "5 to 9 Years":"B01001_028E",
    "10 to 14 Years":"B01001_029E",
    "15 to 17 Years":"B01001_030E",
    "18 and 19 Years":"B01001_031E",
    "20 Years":"B01001_032E",
    "21 Years":"B01001_033E",
    "22 to 24 Years":"B01001_034E",
    "25 to 29 Years":"B01001_035E",
    "30 to 34 Years":"B01001_036E",
    "35 to 39 Years":"B01001_037E",
    "40 to 44 Years":"B01001_038E",
    "45 to 49 Years":"B01001_039E",
    "50 to 54 Years":"B01001_040E",
    "55 to 59 Years":"B01001_041E",
    "60 and 61 Years":"B01001_042E",
    "62 to 64 Years":"B01001_043E",
    "65 and 66 Years":"B01001_044E",
    "67 to 69 Years":"B01001_045E",
    "70 to 74 Years":"B01001_046E",
    "75 to 79 Years":"B01001_047E",
    "80 to 84 Years":"B01001_048E",
    "85 Years and over":"B01001_049E",


    "Median Age by sex - Total":"B01002_001E",
    "Median Age - Male":"B01002_002E",
    "Median Age - Female":"B01002_003E",


    "Race-Total":"B02001_001E",
    "White Alone":"B02001_002E",
    "Black or African American Alone":"B02001_003E",
    "American Indian and Alaska Native Alone":"B02001_004E",
    "Asian Alone":"B02001_005E",
    "Native Hawaiian and Other Pacific Islander Alone":"B02001_006E",
    "Some Other Race Alone":"B02001_007E",
    "Two or More Races":"B02001_008E",
    "Two Races Including Some Other Race":"B02001_009E",
    "Two Races Excluding Some Other Race, and Three or More Races":"B02001_010E",


    "Living arrangement for adults (18 years and over)-Total":"B09021_001E",
    "Lives Alone":"B09021_002E",
    "Householder Living With Spouse or Spouse of Householder":"B09021_003E",
    "Householder Living With Unmarried Partner or Unmarried Partner of Householder":"B09021_004E",
    "Child of Householder":"B09021_005E",
    "Other Relatives":"B09021_006E",
    "Other Nonrelatives":"B09021_007E",
    "18 to 34 Years":"B09021_008E",
    "Lives Alone":"B09021_009E",
    "Householder Living With Spouse or Spouse of Householder":"B09021_010E",
    "Householder Living With Unmarried Partner or Unmarried Partner of Householder":"B09021_011E",
    "Child of Householder":"B09021_012E",
    "Other Relatives":"B09021_013E",
    "Other Nonrelatives":"B09021_014E",
    "35 to 64 Years":"B09021_015E",
    "Lives Alone":"B09021_016E",
    "Householder Living With Spouse or Spouse of Householder":"B09021_017E",
    "Householder Living With Unmarried Partner or Unmarried Partner of Householder":"B09021_018E",
    "Child of Householder":"B09021_019E",
    "Other Relatives":"B09021_020E",
    "Other Nonrelatives":"B09021_021E",
    "65 Years and over":"B09021_022E",
    "Lives Alone":"B09021_023E",
    "Householder Living With Spouse or Spouse of Householder":"B09021_024E",
    "Householder Living With Unmarried Partner or Unmarried Partner of Householder":"B09021_025E",
    "Child of Householder":"B09021_026E",
    "Other Relatives":"B09021_027E",
    "Other Nonrelatives":"B09021_028E",


    "Place of birth by nativity-Total":"C05002_001E",
    "Native":"C05002_002E",
    "Born in State of Residence":"C05002_003E",
    "Born in Other State in the United States":"C05002_004E",
    "Born Outside the United States":"C05002_005E",
    "Puerto Rico":"C05002_006E",
    "U.s. Island Areas or Born Abroad of American Parent(S)":"C05002_007E",
    "Foreign Born":"C05002_008E",

    "Median Household Income in the Past 12 Months (In 2015 Inflation-Adjusted Dollars)":"B19013_001E",

    "Per Capita Income in the Past 12 Months (In 2015 Inflation-Adjusted Dollars)":"B19301_001E",

    "Income to poverty-level ratio-Total":"B17002_001E",
    "Under .50":"B17002_002E",
    ".50 to .74":"B17002_003E",
    ".75 to .99":"B17002_004E",
    "1.00 to 1.24":"B17002_005E",
    "1.25 to 1.49":"B17002_006E",
    "1.50 to 1.74":"B17002_007E",
    "1.75 to 1.84":"B17002_008E",
    "1.85 to 1.99":"B17002_009E",
    "2.00 to 2.99":"B17002_010E",
    "3.00 to 3.99":"B17002_011E",
    "4.00 to 4.99":"B17002_012E",
    "5.00 and over":"B17002_013E",


    "Poverty level by place of birth-Total":"B06012_001E",
    "Below 100 Percent of the Poverty Level":"B06012_002E",
    "100 to 149 Percent of the Poverty Level":"B06012_003E",
    "At or Above 150 Percent of the Poverty Level":"B06012_004E",
    "Born in State of Residence":"B06012_005E",
    "Below 100 Percent of the Poverty Level":"B06012_006E",
    "100 to 149 Percent of the Poverty Level":"B06012_007E",
    "At or Above 150 Percent of the Poverty Level":"B06012_008E",
    "Born in Other State in the United States":"B06012_009E",
    "Below 100 Percent of the Poverty Level":"B06012_010E",
    "100 to 149 Percent of the Poverty Level":"B06012_011E",
    "At or Above 150 Percent of the Poverty Level":"B06012_012E",
    "Native; Born Outside the United States":"B06012_013E",
    "Below 100 Percent of the Poverty Level":"B06012_014E",
    "100 to 149 Percent of the Poverty Level":"B06012_015E",
    "At or Above 150 Percent of the Poverty Level":"B06012_016E",
    "Foreign Born":"B06012_017E",
    "Below 100 Percent of the Poverty Level":"B06012_018E",
    "100 to 149 Percent of the Poverty Level":"B06012_019E",
    "At or Above 150 Percent of the Poverty Level":"B06012_020E",

    "Educational attainment by place of birth-Total":"B06009_001E",
    "Less than High School Graduate":"B06009_002E",
    "High School Graduate (Includes Equivalency)":"B06009_003E",
    "Some College or Associate's Degree":"B06009_004E",
    "Bachelor's Degree":"B06009_005E",
    "Graduate or Professional Degree":"B06009_006E",
    "Born in State of Residence":"B06009_007E",
    "Less than High School Graduate":"B06009_008E",
    "High School Graduate (Includes Equivalency)":"B06009_009E",
    "Some College or Associate's Degree":"B06009_010E",
    "Bachelor's Degree":"B06009_011E",
    "Graduate or Professional Degree":"B06009_012E",
    "Born in Other State in the United States":"B06009_013E",
    "Less than High School Graduate":"B06009_014E",
    "High School Graduate (Includes Equivalency)":"B06009_015E",
    "Some College or Associate's Degree":"B06009_016E",
    "Bachelor's Degree":"B06009_017E",
    "Graduate or Professional Degree":"B06009_018E",
    "Native; Born Outside the United States":"B06009_019E",
    "Less than High School Graduate":"B06009_020E",
    "High School Graduate (Includes Equivalency)":"B06009_021E",
    "Some College or Associate's Degree":"B06009_022E",
    "Bachelor's Degree":"B06009_023E",
    "Graduate or Professional Degree":"B06009_024E",
    "Foreign Born":"B06009_025E",
    "Less than High School Graduate":"B06009_026E",
    "High School Graduate (Includes Equivalency)":"B06009_027E",
    "Some College or Associate's Degree":"B06009_028E",
    "Bachelor's Degree":"B06009_029E",
    "Graduate or Professional Degree":"B06009_030E",

    "Travel time to work-Total":"B08303_001E",
    "Less than 5 Minutes":"B08303_002E",
    "5 to 9 Minutes":"B08303_003E",
    "10 to 14 Minutes":"B08303_004E",
    "15 to 19 Minutes":"B08303_005E",
    "20 to 24 Minutes":"B08303_006E",
    "25 to 29 Minutes":"B08303_007E",
    "30 to 34 Minutes":"B08303_008E",
    "35 to 39 Minutes":"B08303_009E",
    "40 to 44 Minutes":"B08303_010E",
    "45 to 59 Minutes":"B08303_011E",
    "60 to 89 Minutes":"B08303_012E",
    "90 or More Minutes":"B08303_013E",

    "Means of transportation to work-Total":"B08301_001E",
    "Car, Truck, or Van":"B08301_002E",
    "Drove Alone":"B08301_003E",
    "Carpooled":"B08301_004E",
    "In 2-Person Carpool":"B08301_005E",
    "In 3-Person Carpool":"B08301_006E",
    "In 4-Person Carpool":"B08301_007E",
    "In 5- or 6-Person Carpool":"B08301_008E",
    "In 7-or-More-Person Carpool":"B08301_009E",
    "Public Transportation (Excluding Taxicab)":"B08301_010E",
    "Bus or Trolley Bus":"B08301_011E",
    "Streetcar or Trolley Car (Carro Publico in Puerto Rico)":"B08301_012E",
    "Subway or Elevated":"B08301_013E",
    "Railroad":"B08301_014E",
    "Ferryboat":"B08301_015E",
    "Taxicab":"B08301_016E",
    "Motorcycle":"B08301_017E",
    "Bicycle":"B08301_018E",
    "Walked":"B08301_019E",
    "Other Means":"B08301_020E",
    "Worked at Home":"B08301_021E",
}

var ageDistributionObjMale = {
    // "Male":"B01001_002E",
    "Under 5 Years":"B01001_003E",
    "5 to 9 Years":"B01001_004E",
    "10 to 14 Years":"B01001_005E",
    "15 to 17 Years":"B01001_006E",
    "18 and 19 Years":"B01001_007E",
    "20 Years":"B01001_008E",
    "21 Years":"B01001_009E",
    "22 to 24 Years":"B01001_010E",
    "25 to 29 Years":"B01001_011E",
    "30 to 34 Years":"B01001_012E",
    "35 to 39 Years":"B01001_013E",
    "40 to 44 Years":"B01001_014E",
    "45 to 49 Years":"B01001_015E",
    "50 to 54 Years":"B01001_016E",
    "55 to 59 Years":"B01001_017E",
    "60 and 61 Years":"B01001_018E",
    "62 to 64 Years":"B01001_019E",
    "65 and 66 Years":"B01001_020E",
    "67 to 69 Years":"B01001_021E",
    "70 to 74 Years":"B01001_022E",
    "75 to 79 Years":"B01001_023E",
    "80 to 84 Years":"B01001_024E",
    "85 Years and over":"B01001_025E"
}

var ageDistributionObjFemale={
    //"Female":"B01001_026E",
    "Under 5 Years":"B01001_027E",
    "5 to 9 Years":"B01001_028E",
    "10 to 14 Years":"B01001_029E",
    "15 to 17 Years":"B01001_030E",
    "18 and 19 Years":"B01001_031E",
    "20 Years":"B01001_032E",
    "21 Years":"B01001_033E",
    "22 to 24 Years":"B01001_034E",
    "25 to 29 Years":"B01001_035E",
    "30 to 34 Years":"B01001_036E",
    "35 to 39 Years":"B01001_037E",
    "40 to 44 Years":"B01001_038E",
    "45 to 49 Years":"B01001_039E",
    "50 to 54 Years":"B01001_040E",
    "55 to 59 Years":"B01001_041E",
    "60 and 61 Years":"B01001_042E",
    "62 to 64 Years":"B01001_043E",
    "65 and 66 Years":"B01001_044E",
    "67 to 69 Years":"B01001_045E",
    "70 to 74 Years":"B01001_046E",
    "75 to 79 Years":"B01001_047E",
    "80 to 84 Years":"B01001_048E",
    "85 Years and over":"B01001_049E"
}

var medianAgeBySexObj = {
    "Median Age Male":"B01002_002E",
    "Median Age Female":"B01002_003E"
}


var bigObject = {
    "Total population within the locality": "B01003_001E",
    "Age distribution broken down by sex": "B01001_001E",
    "Median age by sex": "B01002_001E",
    "Race": "B02001_001E",
    "Living arrangement for adults (18 years and over)": "B09021_001E",
    "Place of birth by nativity": "C05002_001E",
    "Median household income": "B19013_001E",
    "Per capita income": "B193010_01E",
    "Income to poverty-level ratio": "B170020_01E",
    "Poverty level by place of birth": "B060120_01E",
    "Educational attainment by place of birth": "B060090_01E",
    "Travel time to work": "B083030_01E",
    "Means of transportation to work": "B083010_01E",
    "Race - White Alone": "B02001_002E",
    "Place of birth by nativity - Native": "C05002_002E",
    "Income to poverty-level ratio under .50": "B17002_002E",
    "Means of transportation to work - Car/Van/Truck": "B08301_002E",
    "Means of transportation to work - Public transportation": "B08301_010E"
}
/******************************Aziz code integration 1***********************************/
var dictionary = {
    "Total population within the locality": "B01003_001E",
    "Age distribution broken down by sex": "B01001_001E",
    "Median age by sex": "B01002_001E",
    "Race": "B02001_001E",
    "Living arrangement for adults (18 years and over)": "B09021_001E",
    "Place of birth by nativity": "C05002_001E",
    "Median household income": "B19013_001E",
    "Per capita income": "B193010_01E",
    "Income to poverty-level ratio": "B170020_01E",
    "Poverty level by place of birth": "B060120_01E",
    "Educational attainment by place of birth": "B060090_01E",
    "Travel time to work": "B083030_01E",
    "Means of transportation to work": "B083010_01E"
};

var eightMapObj = {

    "Total population within the locality": "B01003_001E",
    "Median age by sex": "B01002_001E",
    "Median household income": "B19013_001E",
    "Race - White Alone": "B02001_002E",
    "Place of birth by nativity - Native": "C05002_002E",
    "Income to poverty-level ratio under .50": "B17002_002E",
    "Means of transportation to work - Car/Van/Truck": "B08301_002E",
    "Means of transportation to work - Public transportation": "B08301_010E"
}

var apiKey = "576299d4bf73993515a4994ffe79fcee7fe72b09";

// for(var eachObj in eightMapObj){
queue()
    .defer(d3.json, "http://bl.ocks.org/mbostock/raw/4090846/us.json")
    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B01003_001E&for=state:*&key=" + apiKey)
    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B01002_001E&for=state:*&key=" + apiKey)
    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B19013_001E&for=state:*&key=" + apiKey)
    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B02001_002E&for=state:*&key=" + apiKey)
    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,C05002_002E&for=state:*&key=" + apiKey)
    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B17002_002E&for=state:*&key=" + apiKey)
    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B08301_002E&for=state:*&key=" + apiKey)
    .defer(d3.json, "http://api.census.gov/data/2015/acs1?get=NAME,B08301_010E&for=state:*&key=" + apiKey)
    .await(getMapsData);

var pop1 = [];
var pop2 = [];
var age1 = [];
var age2 = [];
var inc1 = [];
var inc2 = [];
var rac1 = [];
var rac2 = [];
var nat1 = [];
var nat2 = [];
var pov1 = [];
var pov2 = [];
var car1 = [];
var car2 = [];
var ptr1 = [];
var ptr2 = [];


function getMapsData(error, usjson, totalPopulation, medianAge, medianIncome, race, native, poverty, carTran, publicTran) {

    totalPopulation.splice(0, 1);
    totalPopulation.forEach(function(index) {
        if (index[1] > 0) {
            pop1.push(parseInt(index[1])); //value
            pop2.push(parseInt(index[2])); //state id
        }
    });

    medianAge.splice(0, 1);
    medianAge.forEach(function(index) {
        if (index[1] > 0) {
            age1.push(Math.floor(parseInt(index[1])));
            age2.push(parseInt(index[2]));
        }
    });

    medianIncome.splice(0, 1);
    medianIncome.forEach(function(index) {
        if (index[1] > 0) {
            inc1.push(Math.floor(parseInt(index[1])));
            inc2.push(parseInt(index[2]));
        }
    });

    race.splice(0, 1);
    race.forEach(function(index) {
        if (index[1] > 0) {
            rac1.push(Math.floor(parseInt(index[1])));
            rac2.push(parseInt(index[2]));
        }
    });

    native.splice(0, 1);
    native.forEach(function(index) {
        if (index[1] > 0) {
            nat1.push(Math.floor(parseInt(index[1])));
            nat2.push(parseInt(index[2]));
        }
    });

    poverty.splice(0, 1);
    poverty.forEach(function(index) {
        if (index[1] > 0) {
            pov1.push(Math.floor(parseInt(index[1])));
            pov2.push(parseInt(index[2]));
        }
    });

    carTran.splice(0, 1);
    carTran.forEach(function(index) {
        if (index[1] > 0) {
            car1.push(Math.floor(parseInt(index[1])));
            car2.push(parseInt(index[2]));
        }
    });

    publicTran.splice(0, 1);
    publicTran.forEach(function(index) {
        if (index[1] > 0) {
            ptr1.push(Math.floor(parseInt(index[1])));
            ptr2.push(parseInt(index[2]));
        }
    });

    var totalPopArr = [];
    var medianAgeArr = [];
    var medianIncomeArr = [];
    var raceArr = [];
    var nativeArr = [];
    var povertyArr = [];
    var carTranArr = [];
    var publicTranArr = [];
    medianAgeArr.push(age1);
    medianAgeArr.push(age2);
    medianIncomeArr.push(inc1);
    medianIncomeArr.push(inc2);
    totalPopArr.push(pop1);
    totalPopArr.push(pop2);
    raceArr.push(rac1);
    raceArr.push(rac2);
    nativeArr.push(nat1);
    nativeArr.push(nat2);
    povertyArr.push(pov1);
    povertyArr.push(pov2);
    carTranArr.push(car1);
    carTranArr.push(car2);
    publicTranArr.push(ptr1);
    publicTranArr.push(ptr2);

    // logging data
    console.log("totalPopArr and medianAgeArr for 8 maps", totalPopArr, medianAgeArr);
    //function start here

    drawEightMaps('#eight-map-1', '#totalPopulationMap', totalPopArr);
    drawEightMaps('#eight-map-2', '#totalMedianAgeMap', medianAgeArr);
    drawEightMaps('#eight-map-3', '#totalMedianIncomeMap', medianIncomeArr);
    drawEightMaps('#eight-map-4', '#totalRaceMap', raceArr);
    drawEightMaps('#eight-map-5', '#totalNativeMap', nativeArr);
    drawEightMaps('#eight-map-6', '#totalPovertyMap', povertyArr);
    drawEightMaps('#eight-map-7', '#totalCarMap', carTranArr);
    drawEightMaps('#eight-map-8', '#totalPublicMap', publicTranArr);

    function drawEightMaps(mapID, svgId, totalValueArr) {

        var outerWidth = 280;
        var outerHeight = 350;
        var margin = {
            left: 20,
            top: 20,
            right: 20,
            bottom: 20
        };

        var innerWidth = outerWidth - margin.left - margin.right;
        var innerHeight = outerHeight - margin.top - margin.bottom;
        var svg = d3.select(mapID).append("svg")
            .attr("width", outerWidth)
            .attr("height", outerHeight)
            .attr("id",svgId);

        var g = svg.append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        //linear scale for linear gradient from color1 to color2
        var quantize = d3.scale.linear()
            .domain([d3.min(totalValueArr[0]), d3.max(totalValueArr[0])])
            .range(["#f7fcfd", "#00441b"]);

        var projection = d3.geo.albersUsa()
            .scale(300)
            .translate([innerWidth / 2, innerHeight / 2]);

        var path = d3.geo.path()
            .projection(projection);

        svg.append("g")
            .attr("class", "legendLinear")
            .attr("transform", "translate(50,290)");

        var legendLinear = d3.legend.color()
            .shapeWidth(30)
            .orient('horizontal')
            .cells(5)
            .labelFormat(d3.format('.2s'))
            .scale(quantize);

        /**
         * tooltip code trial
         */
        var tip = d3.tip()
            .attr('class', 'd3-tip')
            .offset([-10, 0])
            .html(function(d) {

                var prop = totalValueArr[0][totalValueArr[1].indexOf(d.id)];

                var index = parseFloat([totalValueArr[1].indexOf(d.id)]);

                return  + "<span>" + d3.format('.2s')(prop) + "<span>";

            });
        /**
         * tooltip code ends
         */

        svg.call(tip);
        svg.select(".legendLinear")
            .call(legendLinear);

        //to show state borders only
        svg.append("g")
            .selectAll("path")
            .data(topojson.feature(usjson, usjson.objects.states).features)
            .enter().append("path")
            .attr("d", path)
            .style("fill", function(d) {
                return quantize(totalValueArr[0][totalValueArr[1].indexOf(d.id)]);
            }).classed("states", "true")
            .on("mouseover", tip.show)
            .on("mouseleave", tip.hide);
    } //function end here

} //8 maps data function ends here
